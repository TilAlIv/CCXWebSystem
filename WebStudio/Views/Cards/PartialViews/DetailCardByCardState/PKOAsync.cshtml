@model WebStudio.ViewModels.DetailCardViewModel
@using Microsoft.AspNetCore.Identity
@inject UserManager<User> UserManager


<p class="card-text mb-2" id="lin"><span class="badge text-white bg-haky">@Model.Card.CardState</span></p>
<!--Сроки-->
<div class="deadlines d-flex flex-row mt-3 font-italic">
  <div class="form-group">
    <label asp-for="@Model.Card.DateOfProcessingEnd">Дата окончания проработки</label>
    @* @Html.EditorFor(m=>m.Card.DateOfProcessingEnd, new {@class="form-control", required = "required"}) *@
    <input asp-for="@Model.Card.DateOfProcessingEnd" class="form-control" value=@Model.Card.DateOfProcessingEnd.ToString("s") type="datetime-local" required/>
  </div>
  <div class="form-group ml-5 mb-3">
    <label asp-for="@Model.Card.DateOfAuctionStartUpdated">Дата начала торгов</label>
    @Html.EditorFor(m=>m.Card.DateOfAuctionStartUpdated, new {@class="form-control", required = "required"})
  </div>
</div>
  
@if (Model.Card.ExecutorId == UserManager.GetUserId(User) || User.IsInRole("admin"))
{
  <div class="row container form-group">
    <form class="mr-2" asp-action="ChangeCardStatus" asp-controller="Cards" asp-route-cardId="@Model.Card.Id" asp-route-cardState="Торги" method="post">
      <input type="submit" value="Участвовать в торгах" class="btn btn-outline-success shadow mt-2">
    </form>
    <form class="mr-2" asp-action="ChangeCardStatus" asp-controller="Cards" asp-route-cardId="@Model.Card.Id" asp-route-cardState="Удалена" method="post">
      <input type="submit" value="Не участвовать в торгах" class="btn btn-outline-danger shadow mt-2">
    </form>
    <a asp-action="Create" asp-controller="Requests" asp-route-cardId="@Model.Card.Id" class="btn btn-outline-primary mt-2 shadow">Отправить запрос</a>
  </div>
}
